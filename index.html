<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Admin Supabase</title>
</head>
<body>
  <h2>ğŸ“‹ Marques et modÃ¨les</h2>
  <button onclick="charger()">Charger depuis Supabase</button>
  <ul id="liste"></ul>

  <script>
    const supabaseUrl = "https://prrzsosrbrskmeozmmmu.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBycnpzb3NyYnJza21lb3ptbW11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzMTkwMDMsImV4cCI6MjA3Njg5NTAwM30.JuqL6tJC5LRXX3OHXrznm_v9bca-aOJ_vnk_wPsP9Mc";

    const headers = {
      apikey: supabaseKey,
      Authorization: `Bearer ${supabaseKey}`,
    };

    async function charger() {
      try {
        const res = await fetch(`${supabaseUrl}/rest/v1/documents?select=name,model`, { headers });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        console.log("âœ… Marques et modÃ¨les :", data);

        const ul = document.getElementById("liste");
        ul.innerHTML = "";
        data.forEach(item => {
          const li = document.createElement("li");
          li.textContent = `${item.name} - ${item.model}`;
          ul.appendChild(li);
        });

        alert("âœ… DonnÃ©es chargÃ©es ! Regarde la liste et la console.");
      } catch (err) {
        console.error("âŒ Erreur Supabase :", err);
        alert("âŒ Ã‰chec de la connexion. Regarde la console.");
      }
    }
  </script>
</body>
</html>
