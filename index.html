<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V4 - DIAGNOSTIC SUPABASE DNS</title>
    <style>
        body { font-family: Arial; margin: 20px; background: #fff0f0; }
        .test-section { border: 2px solid #cc0000; padding: 15px; margin: 10px 0; border-radius: 8px; background: white; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        .warning { color: orange; font-weight: bold; }
        button { padding: 10px; margin: 5px; background: #cc0000; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .info { background: #ffe6e6; padding: 10px; border-radius: 4px; margin: 10px 0; }
        .solution { background: #e6ffe6; padding: 10px; border-radius: 4px; margin: 10px 0; }
        ul { margin: 10px 0; }
        li { margin: 5px 0; }
    </style>
</head>
<body>
    <h1>üîç V4 - DIAGNOSTIC ERREUR DNS SUPABASE</h1>
    
    <div class="info">
        <h2>üö® PROBLEME CONFIRME : ERREUR DNS</h2>
        <p><strong>prrzsosrbrskmeczmmmu.supabase.co</strong> n'est pas accessible</p>
        <p>Le nom de domaine ne peut pas √™tre r√©solu en adresse IP</p>
    </div>

    <div class="test-section">
        <h2>1. Test Direct de l'URL</h2>
        <button onclick="testURLDirect()">üåê Tester l'URL Directement</button>
        <div id="testURL"></div>
    </div>

    <div class="test-section">
        <h2>2. Causes Possibles</h2>
        <div id="causes">
            <ul>
                <li>‚ùå <strong>Projet Supabase supprim√©</strong></li>
                <li>‚ùå <strong>Nom de projet incorrect</strong></li>
                <li>‚ùå <strong>Probl√®me temporaire Supabase</strong></li>
                <li>‚ùå <strong>Restriction r√©seau</strong></li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>3. Solutions Imm√©diates</h2>
        <button onclick="verifierSupabase()">üîß V√©rifier Dashboard Supabase</button>
        <button onclick="testerAlternatives()">üîÑ Tester Alternatives</button>
        <div id="solutions"></div>
    </div>

    <div class="solution">
        <h2>üéØ SOLUTION RECOMMAND√âE</h2>
        <ol>
            <li><strong>Connectez-vous √† <a href="https://supabase.com" target="_blank">Supabase.com</a></strong></li>
            <li><strong>Allez dans votre Dashboard</strong></li>
            <li><strong>V√©rifiez que le projet "prrzsosrbrskmeczmmmu" existe</strong></li>
            <li><strong>Copiez la NOUVELLE URL depuis Settings ‚Üí API</strong></li>
        </ol>
        <p>Si le projet n'existe plus, vous devrez en cr√©er un nouveau.</p>
    </div>

    <script>
        // TEST: V√©rification directe de l'URL
        async function testURLDirect() {
            const div = document.getElementById('testURL');
            div.innerHTML = "üåê Test direct de l'URL...";
            
            try {
                // Tentative de fetch direct
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 5000);
                
                const response = await fetch('https://prrzsosrbrskmeczmmmu.supabase.co', {
                    method: 'HEAD',
                    mode: 'no-cors',
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                div.innerHTML = '<span class="success">‚úÖ URL accessible (mais peut avoir des restrictions CORS)</span>';
                
            } catch (error) {
                if (error.name === 'AbortError') {
                    div.innerHTML = '<span class="error">‚ùå Timeout - L\'URL ne r√©pond pas</span>';
                } else {
                    div.innerHTML = '<span class="error">‚ùå Erreur DNS - URL inaccessible: ' + error.message + '</span>';
                }
            }
        }

        // V√©rification du dashboard Supabase
        function verifierSupabase() {
            const div = document.getElementById('solutions');
            div.innerHTML = `
                <div class="info">
                    <h3>üìã √âtapes de V√©rification Supabase</h3>
                    <ol>
                        <li>Ouvrez <a href="https://app.supabase.com" target="_blank">app.supabase.com</a></li>
                        <li>Connectez-vous avec votre compte</li>
                        <li>Recherchez le projet "prrzsosrbrskmeczmmmu"</li>
                        <li>Si introuvable, le projet a √©t√© supprim√©</li>
                        <li>Si trouv√©, v√©rifiez son statut (actif/suspendu)</li>
                    </ol>
                    <p><strong>Statuts possibles :</strong></p>
                    <ul>
                        <li>üü¢ ACTIVE - Le projet fonctionne</li>
                        <li>üü° INACTIVE - Le projet est en pause</li>
                        <li>üî¥ DELETED - Le projet a √©t√© supprim√©</li>
                    </ul>
                </div>
            `;
        }

        // Tester des alternatives
        function testerAlternatives() {
            const div = document.getElementById('solutions');
            div.innerHTML = `
                <div class="info">
                    <h3>üîÑ Tests Alternatifs</h3>
                    <p><strong>Test 1 :</strong> <button onclick="testSansWWW()">Tester sans "https://"</button></p>
                    <p><strong>Test 2 :</strong> <button onclick="testAvecWWW()">Tester avec "www."</button></p>
                    <p><strong>Test 3 :</strong> <button onclick="testIPDirect()">Test Ping DNS</button></p>
                    <div id="testAlternatives"></div>
                </div>
            `;
        }

        async function testSansWWW() {
            const div = document.getElementById('testAlternatives');
            div.innerHTML = "Test de prrzsosrbrskmeczmmmu.supabase.co (sans https)...";
            try {
                await fetch('http://prrzsosrbrskmeczmmmu.supabase.co', { mode: 'no-cors' });
                div.innerHTML = '<span class="success">‚úÖ Accessible en HTTP</span>';
            } catch (error) {
                div.innerHTML = '<span class="error">‚ùå Inaccessible en HTTP: ' + error.message + '</span>';
            }
        }

        async function testAvecWWW() {
            const div = document.getElementById('testAlternatives');
            div.innerHTML = "Test de www.prrzsosrbrskmeczmmmu.supabase.co...";
            try {
                await fetch('https://www.prrzsosrbrskmeczmmmu.supabase.co', { mode: 'no-cors' });
                div.innerHTML = '<span class="success">‚úÖ Accessible avec www</span>';
            } catch (error) {
                div.innerHTML = '<span class="error">‚ùå Inaccessible avec www: ' + error.message + '</span>';
            }
        }

        function testIPDirect() {
            const div = document.getElementById('testAlternatives');
            div.innerHTML = "üß™ Test de r√©solution DNS...";
            
            // Cr√©er une image pour tester la r√©solution DNS
            const img = new Image();
            img.onload = function() {
                div.innerHTML = '<span class="success">‚úÖ DNS r√©solu - Le domaine existe</span>';
            };
            img.onerror = function() {
                div.innerHTML = '<span class="error">‚ùå DNS non r√©solu - Le domaine n\'existe pas</span>';
            };
            img.src = 'https://prrzsosrbrskmeczmmmu.supabase.co/favicon.ico?' + Date.now();
        }

        // Test automatique au chargement
        document.addEventListener('DOMContentLoaded', function() {
            console.log("üîç V4 - Diagnostic DNS charg√©");
            setTimeout(testURLDirect, 1000);
        });
    </script>

    <div class="solution">
        <h2>üöÄ SOLUTION ULTIME</h2>
        <p><strong>Si le projet Supabase n'existe plus :</strong></p>
        <ol>
            <li>Allez sur <a href="https://supabase.com" target="_blank">Supabase.com</a></li>
            <li>Cr√©ez un NOUVEAU projet</li>
            <li>Recr√©ez votre table "documents"</li>
            <li>Utilisez la NOUVELLE URL et cl√© API</li>
        </ol>
        <p><strong>Structure de table recommand√©e :</strong></p>
        <pre>
CREATE TABLE documents (
    id BIGSERIAL PRIMARY KEY,
    marque TEXT,
    type TEXT, 
    model TEXT,
    description TEXT,
    schemas TEXT,
    programmation TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);</pre>
    </div>
</body>
</html>
